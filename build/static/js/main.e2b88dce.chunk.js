(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(28)},28:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),l=n(15),u=n(1),m=n(7),i=n(17),s=function(e,t,n,a){fetch("https://defiant-holly-hair.glitch.me/api/"+t,Object(i.a)({method:e,headers:{"Content-Type":"application/json"}},n&&{body:JSON.stringify(n)})).then(function(e){return e.json()}).then(a).catch(function(e){return console.warn(e)})},f=function(e){var t;do{t=prompt(e)}while(!t);return t},d=function(e){var t=e.roomId,n=e.playerName,r=Object(a.useState)(null),c=Object(m.a)(r,2),l=c[0],u=c[1],i=Object(a.useState)(null),f=Object(m.a)(i,2),d=f[0],p=f[1],b=Object(a.useCallback)(function(){s("get","room-status?roomId=".concat(t,"&playerName=").concat(n),null,function(e){var t=e.players,n=e.status;p(n),u(t)})},[]);Object(a.useEffect)(function(){b(),setInterval(b,5e3)},[]);var E=Object(a.useMemo)(function(){return"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u043e\u0432"!==d&&l&&!l[n]},[l,d]),w=Object(a.useRef)(),h=Object(a.useCallback)(function(){var e=w.current.value;s("post","answer",{answer:e,playerName:n,roomId:t})},[n,t]);return o.a.createElement("div",null,o.a.createElement("div",null,"Players:"),l&&o.a.createElement("ol",null,Object.keys(l).map(function(e){return o.a.createElement("li",{key:e},e)})),o.a.createElement("div",null,"Status: ",d),E&&o.a.createElement("input",{ref:w,type:"text"}),E&&o.a.createElement("button",{onClick:h},"Send"))},p=function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),l=Object(m.a)(c,2),u=l[0],i=l[1];Object(a.useEffect)(function(){var e=f("Enter your name!");i(e),s("post","new-room",{name:e},function(e){var t=e.roomId;r(t)})},[]);var p=Object(a.useMemo)(function(){return"room?roomId="+n},[n]),b=Object(a.useCallback)(function(){s("post","start-game",{roomId:n},function(){window.location.assign("/room?roomId=".concat(n,"&playerName=").concat(u))})},[n]);return n?o.a.createElement("div",null,o.a.createElement("a",{href:p,target:"_blank",rel:"noopener noreferrer"},"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u043e\u043c\u043d\u0430\u0442\u0443"),o.a.createElement("button",{onClick:b},"Start game"),o.a.createElement(d,{roomId:n,playerName:u})):"Processing"},b=function(){var e=new URL(document.location).searchParams,t=e.get("roomId"),n=e.get("playerName");return Object(a.useEffect)(function(){n||(n=f("Enter your name!"),s("post","join-room",{name:n,roomId:t},function(e){e.error?alert(e.error):window.location.assign(window.location.href+"&playerName="+n)}))},[]),n&&o.a.createElement(d,{roomId:t,playerName:n})},E=function(){return o.a.createElement(l.a,null,o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/new-room"},o.a.createElement(p,null)),o.a.createElement(u.a,{path:"/room"},o.a.createElement(b,null)),o.a.createElement(u.a,{path:""},o.a.createElement("a",{href:"/new-room"},"Create room"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.e2b88dce.chunk.js.map